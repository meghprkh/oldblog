<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>GSoC Summary | Megh&#39;s Blog</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="This post is meant to serve as a summary of work I did during GSoC. You may directly wish to skip to the links section"><meta property="og:type" content="article"><meta property="og:title" content="GSoC Summary"><meta property="og:url" content="https://meghprkh.github.io/blog/2016/08/22/GSoC-Summary/index.html"><meta property="og:site_name" content="Megh's Blog"><meta property="og:description" content="This post is meant to serve as a summary of work I did during GSoC. You may directly wish to skip to the links section"><meta property="og:updated_time" content="2016-08-22T11:49:40.022Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="GSoC Summary"><meta name="twitter:description" content="This post is meant to serve as a summary of work I did during GSoC. You may directly wish to skip to the links section"><link rel="alternate" href="/atom.xml" title="Megh&#39;s Blog" type="application/atom+xml"><link rel="stylesheet" href="/blog/vendor/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/blog/vendor/open-sans/styles.css"><link rel="stylesheet" href="/blog/vendor/source-code-pro/styles.css"><link rel="stylesheet" href="/blog/css/style.css"><script src="/blog/vendor/jquery/2.1.3/jquery.min.js"></script><link rel="stylesheet" href="/blog/vendor/fancybox/jquery.fancybox.css"><script type="text/javascript">!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-66948931-2","auto"),ga("send","pageview")</script><script>window.location.host.startsWith("localhost")||"https:"==window.location.protocol||(window.location.protocol="https")</script></head><body><div id="container"><header id="header"><div id="header-main" class="header-inner"><div class="outer"><a href="/blog/" id="logo"><span class="site-title">Megh&#39;s Blog</span></a><nav id="main-nav"><a class="main-nav-link" href="/blog/.">Home</a> <a class="main-nav-link" href="/blog/archives">Archives</a> <a class="main-nav-link" href="/blog/categories">Categories</a> <a class="main-nav-link" href="/blog/tags">Tags</a> <a class="main-nav-link" href="/blog/about">About</a></nav><nav id="sub-nav"><div class="profile" id="profile-nav"><a id="profile-anchor" href="javascript:;"><img class="avatar" src="/blog/css/images/avatar.png"> <i class="fa fa-caret-down"></i></a></div></nav><div id="search-form-wrap"><form class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Search"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>!function(T){var o={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/blog/",CONTENT_URL:"/blog/content.json"};T.INSIGHT_CONFIG=o}(window)</script><script src="/blog/js/insight.js"></script></div></div></div><div id="main-nav-mobile" class="header-sub header-inner"><table class="menu outer"><tr><td><a class="main-nav-link" href="/blog/.">Home</a></td><td><a class="main-nav-link" href="/blog/archives">Archives</a></td><td><a class="main-nav-link" href="/blog/categories">Categories</a></td><td><a class="main-nav-link" href="/blog/tags">Tags</a></td><td><a class="main-nav-link" href="/blog/about">About</a></td><td><div class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Search"></div></td></tr></table></div></header><div class="outer"><aside id="profile"><div class="inner profile-inner"><div class="base-info profile-block"><img id="avatar" src="/blog/css/images/avatar.png"><h2 id="name">Megh Parikh</h2><h3 id="title">Web Developer - ReactJS developer - GNOME user</h3><span id="location"><i class="fa fa-map-marker"></i>Vadodara, India</span> <a id="follow" target="_blank" href="https://github.com/meghprkh/">FOLLOW</a></div><div class="article-info profile-block"><div class="article-info-block">7 <span>posts</span></div><div class="article-info-block">12 <span>tags</span></div></div><div class="profile-block social-links"><table><tr><td><a href="https://github.com/meghprkh/" target="_blank" title="github" class="tooltip"><i class="fa fa-github"></i></a></td><td><a href="https://twitter.com/meghparikh" target="_blank" title="twitter" class="tooltip"><i class="fa fa-twitter"></i></a></td><td><a href="https://meghprkh.github.io" target="_blank" title="globe" class="tooltip"><i class="fa fa-globe"></i></a></td><td><a href="/blog/atom.xml" target="_blank" title="rss" class="tooltip"><i class="fa fa-rss"></i></a></td></tr></table></div></div></aside><section id="main"><article id="post-GSoC-Summary" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">GSoC Summary</h1><div class="article-meta"><div class="article-date"><i class="fa fa-calendar"></i> <a href="/blog/2016/08/22/GSoC-Summary/"><time datetime="2016-08-22T11:41:26.000Z" itemprop="datePublished">2016-08-22</time></a></div><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link" href="/blog/tags/GSoC-GNOME/">GSoC, GNOME</a></div></div></header><div class="article-entry" itemprop="articleBody"><p>This post is meant to serve as a summary of work I did during GSoC. You may directly wish to skip to the <a href="#Links">links section</a></p><a id="more"></a><h1 id="The-Goal"><a href="#The-Goal" class="headerlink" title="The Goal"></a>The Goal</h1><p>The goal to be achieved was to be able to play both single player and multiplayer emulated games using a gamepad in GNOME Games</p><h1 id="Where-are-we-right-now"><a href="#Where-are-we-right-now" class="headerlink" title="Where are we right now"></a>Where are we right now</h1><ul><li><em>Plug-n-play gamepad support:</em> We use the SDL mappings format and thus reuse a huge community DB of mappings to provide this.</li><li><em>Monitor plugin and unplugging of gamepads and react to it without user interaction:</em> The user should not be forced to take unnecessary steps to use the gamepads.</li><li><em>Multiplayer games/multiple gamepads support:</em> While there is no GUI for this the current way is intuitive and easy to use. In fact, normally you won’t have the need to use the GUI at all. <a href="https://meghprkh.github.io/blog/2016/07/22/The-state-of-gamepad-support-in-Games/#Multiplayer-support">More about this here</a></li><li><em>Separate codebase that can be reused (not a library yet):</em> The codebase leaves under a separate directory and has no dependencies on the main codebase. In fact, initially it was developed under a different namespace. Also in the process a library - <a href="https://github.com/meghprkh/libgamepad" target="_blank" rel="external">libgamepad</a> had been created. But I couldnt find the time to keep it up-to-date. Nevertheless it is functional currently also.</li></ul><h1 id="What-is-left-to-be-done"><a href="#What-is-left-to-be-done" class="headerlink" title="What is left to be done"></a>What is left to be done</h1><ul><li>Intuitive GUI to remap gamepads when multiple gamepads are plugged in. Mockups had been created and discussed ad the final design is ready (more about this in a future blog post)! You can check the current progress <a href="https://github.com/meghprkh/gnome-games/tree/dirty/feature/gamepad-select-ui-new" target="_blank" rel="external">here</a>.</li></ul><h1 id="Stretch-Goals"><a href="#Stretch-Goals" class="headerlink" title="Stretch Goals"></a>Stretch Goals</h1><p>I hope that I would be able to complete these during my winter vacation:</p><ul><li>Create a gamepad mapping creator UI (currently either Steam or SDL’s controller map tool can be used for this)</li><li>Update <a href="https://github.com/meghprkh/libgamepad" target="_blank" rel="external">libgamepad</a> to match the current codebase of Games.</li></ul><h1 id="Challenges"><a href="#Challenges" class="headerlink" title="Challenges"></a>Challenges</h1><ul><li><em>Evdev and the Joystick API:</em> Initially WIP code had already been written by my mentor for the Joystick API and my project was to finish and polish that code. But later I came to know that the evdev API is the better API and that is what is used by all current libraries/programs (SDL/RetroArch). So I had to dig into the evdev API and start afresh.</li><li><em>VAPI for libevdev:</em> Vala requires us to create VAPIs for using C libraries (and you have to do it manually for non-Glib based ones). While creating the VAPI for libevdev I encountered a lot of challenges and got to know the Vala language much better.</li><li><em>Understanding the SDL codebase and the mappings format:</em> Now we needed a good mappings database. So we thought that it would be better if we could reuse some already existing database. So we decided to adopt the SDL mappings format, but I had some difficulty initially understanding their format (especially the GUID). Also I took inspiration from the SDL code and adopted it but I faced some difficulty understanding their C code.</li><li><em>Multiplayer support:</em> We needed an intuitive way which does not interfere with the user, i.e. we wanted a way to implement this so that the user will not have to do anything to play multiplayer games by default but if he wants he can configure the default assignment. After some brainstorming we decided on <a href="https://meghprkh.github.io/blog/2016/07/22/The-state-of-gamepad-support-in-Games/#Multiplayer-support">this</a></li></ul><h1 id="Some-technical-details"><a href="#Some-technical-details" class="headerlink" title="Some technical details"></a>Some technical details</h1><ul><li><a href="https://meghprkh.github.io/blog/2016/06/03/Handling-joysticks-and-gamepads-in-linux/">Evdev</a> was used using <a href="https://www.freedesktop.org/software/libevdev/doc/latest/" target="_blank" rel="external">libevdev</a> to handle gamepads</li><li><a href="https://en.wikipedia.org/wiki/Udev" target="_blank" rel="external">Udev</a> was used using <a href="https://wiki.gnome.org/Projects/libgudev" target="_blank" rel="external">GUdev</a> for detecting plugging/unplugging of gamepads</li><li><a href="https://github.com/spurious/SDL-mirror/blob/release-2.0.4/src/joystick/SDL_gamecontrollerdb.h#L26-L30" target="_blank" rel="external">SDL mappings format</a> was used so that we have access to a large controller <a href="https://github.com/gabomdq/SDL_GameControllerDB" target="_blank" rel="external">mappings database</a>. I even wrote a <a href="https://github.com/gabomdq/SDL_GameControllerDB/commits/master?author=meghprkh" target="_blank" rel="external">python script</a> to validate the mappings and integrated with Travis so that the maintainer can easily merge the mappings.</li></ul><h1 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h1><ul><li><a href="https://github.com/Kekun/gnome-games/commits/master?author=meghprkh" target="_blank" rel="external">Add Gamepad support - commits</a></li><li><a href="https://meghprkh.github.io/blog/2016/07/22/The-state-of-gamepad-support-in-Games/#Multiplayer-support">Multiplayer support</a></li><li><a href="https://github.com/meghprkh/libgamepad" target="_blank" rel="external">libgamepad</a></li><li><a href="https://github.com/meghprkh/gnome-games/tree/dirty/feature/gamepad-select-ui-new" target="_blank" rel="external">Multiple gamepads select UI WIP branch</a></li><li><a href="https://meghprkh.github.io/blog/2016/06/03/Handling-joysticks-and-gamepads-in-linux/">More details on the implemetation</a></li><li><a href="https://github.com/gabomdq/SDL_GameControllerDB/commits/master?author=meghprkh" target="_blank" rel="external">Python script to check SDL controller DB</a></li></ul></div><footer class="article-footer"><div class="share-container"></div><a data-url="https://meghprkh.github.io/blog/2016/08/22/GSoC-Summary/" data-id="cis5z2cmb000062vz3tgvyak0" class="article-share-link"><i class="fa fa-share"></i>Share</a><script>!function(t){"undefined"!=typeof __SHARE_BUTTON_BINDED__&&__SHARE_BUTTON_BINDED__||(__SHARE_BUTTON_BINDED__=!0,t("body").on("click",function(){t(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(e){e.stopPropagation();var a,o=t(this),i=o.attr("data-url"),r=encodeURIComponent(i),s="article-share-box-"+o.attr("data-id"),l=o.offset();if(t("#"+s).length){if(a=t("#"+s),a.hasClass("on"))return void a.removeClass("on")}else{var n=['<div id="'+s+'" class="article-share-box">','<input class="article-share-input" value="'+i+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+r+'" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+r+'" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+r+'" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+r+'" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join("");a=t(n),t("body").append(a)}t(".article-share-box.on").hide(),a.css({top:l.top+25,left:l.left}).addClass("on")}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){t(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}))}(jQuery)</script><a href="https://meghprkh.github.io/blog/2016/08/22/GSoC-Summary/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://meghprkh.github.io/blog/2016/08/22/GSoC-Summary/">Comments</a></footer></div><nav id="article-nav"><a href="/blog/2016/07/22/The-state-of-gamepad-support-in-Games/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">The state of gamepad support in Games</div></a></nav></article><section id="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">recent</h3><div class="widget"><ul id="recent-post"><li><div class="item-thumbnail"><a href="/blog/2016/08/22/GSoC-Summary/" class="thumbnail"><span class="thumbnail-image thumbnail-none"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/blog/2016/08/22/GSoC-Summary/" class="title">GSoC Summary</a></p><p class="item-date"><time datetime="2016-08-22T11:41:26.000Z" itemprop="datePublished">2016-08-22</time></p></div></li><li><div class="item-thumbnail"><a href="/blog/2016/07/22/The-state-of-gamepad-support-in-Games/" class="thumbnail"><span class="thumbnail-image thumbnail-none"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/blog/categories/Opensource/">Opensource</a></p><p class="item-title"><a href="/blog/2016/07/22/The-state-of-gamepad-support-in-Games/" class="title">The state of gamepad support in Games</a></p><p class="item-date"><time datetime="2016-07-21T20:02:16.000Z" itemprop="datePublished">2016-07-22</time></p></div></li><li><div class="item-thumbnail"><a href="/blog/2016/07/11/Adventures-with-the-Meson-Build-System-and-a-GTK-Playground/" class="thumbnail"><span class="thumbnail-image thumbnail-none"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/blog/categories/Opensource/">Opensource</a></p><p class="item-title"><a href="/blog/2016/07/11/Adventures-with-the-Meson-Build-System-and-a-GTK-Playground/" class="title">Adventures with the Meson Build System and a GTK Playground</a></p><p class="item-date"><time datetime="2016-07-10T19:30:04.000Z" itemprop="datePublished">2016-07-11</time></p></div></li><li><div class="item-thumbnail"><a href="/blog/2016/06/26/GSoC-Progress-so-far/" class="thumbnail"><span class="thumbnail-image thumbnail-none"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/blog/categories/Opensource/">Opensource</a></p><p class="item-title"><a href="/blog/2016/06/26/GSoC-Progress-so-far/" class="title">GSoC - Progress so far</a></p><p class="item-date"><time datetime="2016-06-26T13:28:22.000Z" itemprop="datePublished">2016-06-26</time></p></div></li><li><div class="item-thumbnail"><a href="/blog/2016/06/03/Handling-joysticks-and-gamepads-in-linux/" class="thumbnail"><span class="thumbnail-image thumbnail-none"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/blog/categories/Opensource/">Opensource</a></p><p class="item-title"><a href="/blog/2016/06/03/Handling-joysticks-and-gamepads-in-linux/" class="title">Handling joysticks and gamepads in linux</a></p><p class="item-date"><time datetime="2016-06-03T16:58:52.000Z" itemprop="datePublished">2016-06-03</time></p></div></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">categories</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Opensource/">Opensource</a><span class="category-list-count">6</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">archives</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/08/">August 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/07/">July 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/06/">June 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/05/">May 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2014/12/">December 2014</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">tags</h3><div class="widget"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Fedora/">Fedora</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/GNOME/">GNOME</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/GNOME-Games/">GNOME Games</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/GSoC/">GSoC</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/GSoC-GNOME/">GSoC, GNOME</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Gamepad/">Gamepad</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Games/">Games</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Joystick/">Joystick</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Library/">Library</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Linux/">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Meson-Build/">Meson Build</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Packaging/">Packaging</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">tag cloud</h3><div class="widget tagcloud"><a href="/blog/tags/Fedora/" style="font-size:10px">Fedora</a> <a href="/blog/tags/GNOME/" style="font-size:20px">GNOME</a> <a href="/blog/tags/GNOME-Games/" style="font-size:12.5px">GNOME Games</a> <a href="/blog/tags/GSoC/" style="font-size:17.5px">GSoC</a> <a href="/blog/tags/GSoC-GNOME/" style="font-size:10px">GSoC, GNOME</a> <a href="/blog/tags/Gamepad/" style="font-size:15px">Gamepad</a> <a href="/blog/tags/Games/" style="font-size:12.5px">Games</a> <a href="/blog/tags/Joystick/" style="font-size:10px">Joystick</a> <a href="/blog/tags/Library/" style="font-size:10px">Library</a> <a href="/blog/tags/Linux/" style="font-size:10px">Linux</a> <a href="/blog/tags/Meson-Build/" style="font-size:10px">Meson Build</a> <a href="/blog/tags/Packaging/" style="font-size:10px">Packaging</a></div></div><div id="toTop" class="fa fa-angle-up"></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2016 Megh Parikh<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a></div></div></footer><script>var disqus_config=function(){this.page.url="https://meghprkh.github.io/blog/2016/08/22/GSoC-Summary/",this.page.identifier="GSoC-Summary"};!function(){var e=document,t=e.createElement("script");t.src="//meghblog.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}()</script><script src="/blog/vendor/fancybox/jquery.fancybox.pack.js"></script><script src="/blog/js/main.js"></script></div></body></html>